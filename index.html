<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Carte des lignes TER - Ouverture √† la concurrence</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
        }
        #map {
            height: 100vh;
            width: 100%;
        }
        .legend {
            background: white;
            padding: 18px;
            border-radius: 8px;
            box-shadow: 0 2px 12px rgba(0,0,0,0.15);
            line-height: 28px;
            color: #444;
        }
        .legend h4 {
            margin: 0 0 12px 0;
            font-size: 16px;
            font-weight: 600;
            color: #222;
        }
        .legend-item {
            margin: 10px 0;
            display: flex;
            align-items: center;
            font-size: 13px;
        }
        .legend-color {
            width: 36px;
            height: 4px;
            margin-right: 12px;
            border-radius: 2px;
        }
        .legend-source {
            font-size: 11px;
            margin-top: 14px;
            padding-top: 14px;
            border-top: 1px solid #e5e5e5;
            color: #888;
        }
        .info {
            padding: 14px 16px;
            background: white;
            box-shadow: 0 2px 12px rgba(0,0,0,0.15);
            border-radius: 8px;
        }
        .info h4 {
            margin: 0 0 8px;
            color: #222;
            font-weight: 600;
            font-size: 16px;
        }
        .info p {
            margin: 4px 0;
            font-size: 13px;
            color: #666;
        }
        .leaflet-popup-content {
            margin: 14px;
            max-width: 320px;
        }
        .leaflet-popup-content h3 {
            margin: 0 0 12px 0;
            font-size: 15px;
            color: #222;
            font-weight: 600;
        }
        .leaflet-popup-content p {
            margin: 7px 0;
            font-size: 13px;
            line-height: 1.5;
        }
        .leaflet-popup-content strong {
            color: #444;
        }
        .popup-label {
            display: inline-block;
            min-width: 80px;
        }
    </style>
</head>
<body>
    <div id="map"></div>
    
    <script>
        var map = L.map('map').setView([47.0, 2.5], 6);
        
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '¬© OpenStreetMap contributors',
            maxZoom: 19
        }).addTo(map);
        
        var styles = {
            'attribue_SNCF': {
                color: '#0088CE',
                weight: 3,
                opacity: 0.7
            },
            'attribue_concurrent': {
                color: '#E63946',
                weight: 5,
                opacity: 0.9
            },
            'mis_en_concurrence_pas_attribue': {
                color: '#F77F00',
                weight: 4,
                opacity: 0.8
            }
        };
        
        var lignes = [{"coords": [[5.0415, 47.322], [4.8311, 46.3061]], "lib_ligne": "Dijon ‚Üí M√¢con", "statut": "attribue_SNCF", "operateur": "SNCF", "relation": "Dijon>M√¢con", "region": "Bourgogne-Franche-Comt√©", "type_marche": "TER", "lot": "Bourgogne-Ouest-Nivernais"}, {"coords": [[2.9261, 47.4111], [3.3333, 46.5653]], "lib_ligne": "Cosne ‚Üí Moulins", "statut": "attribue_SNCF", "operateur": "SNCF", "relation": "Cosne>Moulins", "region": "Bourgogne-Franche-Comt√©", "type_marche": "TER", "lot": "Bourgogne-Ouest-Nivernais"}, {"coords": [[4.755, 46.9097], [3.1667, 47.0]], "lib_ligne": "Chagny ‚Üí Nevers", "statut": "attribue_SNCF", "operateur": "SNCF", "relation": "Chagny>Nevers", "region": "Bourgogne-Franche-Comt√©", "type_marche": "TER", "lot": "Bourgogne-Ouest-Nivernais"}, {"coords": [[4.4669, 46.75], [4.1186, 46.4522]], "lib_ligne": "Montchanin ‚Üí Paray", "statut": "attribue_SNCF", "operateur": "SNCF", "relation": "Montchanin>Paray", "region": "Bourgogne-Franche-Comt√©", "type_marche": "TER", "lot": "Bourgogne-Ouest-Nivernais"}, {"coords": [[4.8357, 45.764], [3.3333, 46.5653]], "lib_ligne": "Lyon ‚Üí Moulins", "statut": "attribue_SNCF", "operateur": "SNCF", "relation": "Lyon>Moulins", "region": "Bourgogne-Franche-Comt√©", "type_marche": "TER", "lot": "Bourgogne-Ouest-Nivernais"}, {"coords": [[6.1844, 48.6921], [5.8833, 48.1833]], "lib_ligne": "Nancy ‚Üí Contrexville", "statut": "attribue_concurrent", "operateur": "Transdev (groupement NGE/Banque des Territoires)", "relation": "Nancy>Contrexville", "region": "Grand Est", "type_marche": "TER", "lot": "Nancy-Contrex√©ville"}, {"coords": [[6.45, 48.1747], [6.95, 48.2833]], "lib_ligne": "√âpinal ‚Üí Saint-Die-des-vosges", "statut": "mis_en_concurrence_pas_attribue", "operateur": "Non attribu√©", "relation": "√âpinal>Saint-Die-des-vosges>Strasbourg", "region": "Grand Est", "type_marche": "TER", "lot": "Bruche-Pi√©mont-Vosges"}, {"coords": [[6.95, 48.2833], [7.7521, 48.5734]], "lib_ligne": "Saint-Die-des-vosges ‚Üí Strasbourg", "statut": "mis_en_concurrence_pas_attribue", "operateur": "Non attribu√©", "relation": "√âpinal>Saint-Die-des-vosges>Strasbourg", "region": "Grand Est", "type_marche": "TER", "lot": "Bruche-Pi√©mont-Vosges"}, {"coords": [[7.4667, 48.26], [7.4933, 48.54]], "lib_ligne": "S√©lestat ‚Üí Molsheim", "statut": "mis_en_concurrence_pas_attribue", "operateur": "Non attribu√©", "relation": "S√©lestat>Molsheim>Strasbourg", "region": "Grand Est", "type_marche": "TER", "lot": "Bruche-Pi√©mont-Vosges"}, {"coords": [[7.4933, 48.54], [7.7521, 48.5734]], "lib_ligne": "Molsheim ‚Üí Strasbourg", "statut": "mis_en_concurrence_pas_attribue", "operateur": "Non attribu√©", "relation": "S√©lestat>Molsheim>Strasbourg", "region": "Grand Est", "type_marche": "TER", "lot": "Bruche-Pi√©mont-Vosges"}, {"coords": [[6.1757, 49.1193], [6.6441, 49.7596]], "lib_ligne": "Metz ‚Üí Trier", "statut": "mis_en_concurrence_pas_attribue", "operateur": "Non attribu√©", "relation": "Metz>Trier", "region": "Grand Est", "type_marche": "TER", "lot": "Lot transfrontalier"}, {"coords": [[6.1757, 49.1193], [6.9969, 49.2403]], "lib_ligne": "Metz ‚Üí Saarbr√ºcken", "statut": "mis_en_concurrence_pas_attribue", "operateur": "Non attribu√©", "relation": "Metz>Saarbr√ºcken", "region": "Grand Est", "type_marche": "TER", "lot": "Lot transfrontalier"}, {"coords": [[7.7521, 48.5734], [6.9969, 49.2403]], "lib_ligne": "Strasbourg ‚Üí Saarbr√ºcken", "statut": "mis_en_concurrence_pas_attribue", "operateur": "Non attribu√©", "relation": "Strasbourg>Saarbr√ºcken", "region": "Grand Est", "type_marche": "TER", "lot": "Lot transfrontalier"}, {"coords": [[7.7521, 48.5734], [7.9444, 49.0378]], "lib_ligne": "Strasbourg ‚Üí Wissembourg", "statut": "mis_en_concurrence_pas_attribue", "operateur": "Non attribu√©", "relation": "Strasbourg>Wissembourg>Neustadt", "region": "Grand Est", "type_marche": "TER", "lot": "Lot transfrontalier"}, {"coords": [[7.9444, 49.0378], [8.1363, 49.3514]], "lib_ligne": "Wissembourg ‚Üí Neustadt", "statut": "mis_en_concurrence_pas_attribue", "operateur": "Non attribu√©", "relation": "Strasbourg>Wissembourg>Neustadt", "region": "Grand Est", "type_marche": "TER", "lot": "Lot transfrontalier"}, {"coords": [[7.7521, 48.5734], [8.1769, 48.9769]], "lib_ligne": "Strasbourg ‚Üí Lauterbourg", "statut": "mis_en_concurrence_pas_attribue", "operateur": "Non attribu√©", "relation": "Strasbourg>Lauterbourg>W√∂rth>Karlsruhe", "region": "Grand Est", "type_marche": "TER", "lot": "Lot transfrontalier"}, {"coords": [[8.1769, 48.9769], [8.2603, 49.0019]], "lib_ligne": "Lauterbourg ‚Üí W√∂rth", "statut": "mis_en_concurrence_pas_attribue", "operateur": "Non attribu√©", "relation": "Strasbourg>Lauterbourg>W√∂rth>Karlsruhe", "region": "Grand Est", "type_marche": "TER", "lot": "Lot transfrontalier"}, {"coords": [[8.2603, 49.0019], [8.4044, 49.0094]], "lib_ligne": "W√∂rth ‚Üí Karlsruhe", "statut": "mis_en_concurrence_pas_attribue", "operateur": "Non attribu√©", "relation": "Strasbourg>Lauterbourg>W√∂rth>Karlsruhe", "region": "Grand Est", "type_marche": "TER", "lot": "Lot transfrontalier"}, {"coords": [[7.7521, 48.5734], [7.9411, 48.4733]], "lib_ligne": "Strasbourg ‚Üí Offenburg", "statut": "mis_en_concurrence_pas_attribue", "operateur": "Non attribu√©", "relation": "Strasbourg>Offenburg", "region": "Grand Est", "type_marche": "TER", "lot": "Lot transfrontalier"}, {"coords": [[7.3389, 47.7483], [7.6269, 47.8094]], "lib_ligne": "Mulhouse ‚Üí M√ºllheim", "statut": "mis_en_concurrence_pas_attribue", "operateur": "Non attribu√©", "relation": "Mulhouse>M√ºllheim", "region": "Grand Est", "type_marche": "TER", "lot": "Lot transfrontalier"}, {"coords": [[3.9583, 49.0417], [4.0317, 49.2583]], "lib_ligne": "Epernay ‚Üí Reims", "statut": "mis_en_concurrence_pas_attribue", "operateur": "Non attribu√©", "relation": "Epernay>Reims>Ch√¢teauThierry", "region": "Grand Est", "type_marche": "TER", "lot": "√âtoile de Reims"}, {"coords": [[4.0317, 49.2583], [3.4033, 49.0447]], "lib_ligne": "Reims ‚Üí Ch√¢teauThierry", "statut": "mis_en_concurrence_pas_attribue", "operateur": "Non attribu√©", "relation": "Epernay>Reims>Ch√¢teauThierry", "region": "Grand Est", "type_marche": "TER", "lot": "√âtoile de Reims"}, {"coords": [[4.3667, 49.2083], [4.0317, 49.2583]], "lib_ligne": "ChampagneArdenneTGV ‚Üí Reims", "statut": "mis_en_concurrence_pas_attribue", "operateur": "Non attribu√©", "relation": "ChampagneArdenneTGV>Reims>Charleville-M√©zi√®res>Sedan", "region": "Grand Est", "type_marche": "TER", "lot": "√âtoile de Reims"}, {"coords": [[4.0317, 49.2583], [4.7194, 49.7628]], "lib_ligne": "Reims ‚Üí Charleville-M√©zi√®res", "statut": "mis_en_concurrence_pas_attribue", "operateur": "Non attribu√©", "relation": "ChampagneArdenneTGV>Reims>Charleville-M√©zi√®res>Sedan", "region": "Grand Est", "type_marche": "TER", "lot": "√âtoile de Reims"}, {"coords": [[4.7194, 49.7628], [4.9397, 49.7025]], "lib_ligne": "Charleville-M√©zi√®res ‚Üí Sedan", "statut": "mis_en_concurrence_pas_attribue", "operateur": "Non attribu√©", "relation": "ChampagneArdenneTGV>Reims>Charleville-M√©zi√®res>Sedan", "region": "Grand Est", "type_marche": "TER", "lot": "√âtoile de Reims"}, {"coords": [[4.7194, 49.7628], [4.8258, 50.1367]], "lib_ligne": "Charleville-M√©zi√®res ‚Üí Givet", "statut": "mis_en_concurrence_pas_attribue", "operateur": "Non attribu√©", "relation": "Charleville-M√©zi√®res>Givet", "region": "Grand Est", "type_marche": "TER", "lot": "√âtoile de Reims"}, {"coords": [[4.7194, 49.7628], [4.0822, 49.9211]], "lib_ligne": "Charleville-m√©zi√®res ‚Üí Hirson", "statut": "mis_en_concurrence_pas_attribue", "operateur": "Non attribu√©", "relation": "Charleville-m√©zi√®res>Hirson>Longuyon>Longwy/Thionville", "region": "Grand Est", "type_marche": "TER", "lot": "√âtoile de Reims"}, {"coords": [[4.0822, 49.9211], [5.6, 49.45]], "lib_ligne": "Hirson ‚Üí Longuyon", "statut": "mis_en_concurrence_pas_attribue", "operateur": "Non attribu√©", "relation": "Charleville-m√©zi√®res>Hirson>Longuyon>Longwy/Thionville", "region": "Grand Est", "type_marche": "TER", "lot": "√âtoile de Reims"}, {"coords": [[5.6, 49.45], [5.7633, 49.5186]], "lib_ligne": "Longuyon ‚Üí Longwy/Thionville", "statut": "mis_en_concurrence_pas_attribue", "operateur": "Non attribu√©", "relation": "Charleville-m√©zi√®res>Hirson>Longuyon>Longwy/Thionville", "region": "Grand Est", "type_marche": "TER", "lot": "√âtoile de Reims"}, {"coords": [[4.0317, 49.2583], [4.3625, 48.9531]], "lib_ligne": "Reims ‚Üí Ch√¢lons-en-Champagne", "statut": "mis_en_concurrence_pas_attribue", "operateur": "Non attribu√©", "relation": "Reims>Ch√¢lons-en-Champagne>Saint-Dizier>Chaumont>Culmont-Chalindrey>Dijon", "region": "Grand Est", "type_marche": "TER", "lot": "√âtoile de Reims"}, {"coords": [[4.3625, 48.9531], [4.9497, 48.6364]], "lib_ligne": "Ch√¢lons-en-Champagne ‚Üí Saint-Dizier", "statut": "mis_en_concurrence_pas_attribue", "operateur": "Non attribu√©", "relation": "Reims>Ch√¢lons-en-Champagne>Saint-Dizier>Chaumont>Culmont-Chalindrey>Dijon", "region": "Grand Est", "type_marche": "TER", "lot": "√âtoile de Reims"}, {"coords": [[4.9497, 48.6364], [5.1389, 48.1133]], "lib_ligne": "Saint-Dizier ‚Üí Chaumont", "statut": "mis_en_concurrence_pas_attribue", "operateur": "Non attribu√©", "relation": "Reims>Ch√¢lons-en-Champagne>Saint-Dizier>Chaumont>Culmont-Chalindrey>Dijon", "region": "Grand Est", "type_marche": "TER", "lot": "√âtoile de Reims"}, {"coords": [[5.1389, 48.1133], [5.4833, 47.8464]], "lib_ligne": "Chaumont ‚Üí Culmont-Chalindrey", "statut": "mis_en_concurrence_pas_attribue", "operateur": "Non attribu√©", "relation": "Reims>Ch√¢lons-en-Champagne>Saint-Dizier>Chaumont>Culmont-Chalindrey>Dijon", "region": "Grand Est", "type_marche": "TER", "lot": "√âtoile de Reims"}, {"coords": [[5.4833, 47.8464], [5.0415, 47.322]], "lib_ligne": "Culmont-Chalindrey ‚Üí Dijon", "statut": "mis_en_concurrence_pas_attribue", "operateur": "Non attribu√©", "relation": "Reims>Ch√¢lons-en-Champagne>Saint-Dizier>Chaumont>Culmont-Chalindrey>Dijon", "region": "Grand Est", "type_marche": "TER", "lot": "√âtoile de Reims"}, {"coords": [[4.0317, 49.2583], [3.6822, 49.3111]], "lib_ligne": "Reims ‚Üí Fismes", "statut": "mis_en_concurrence_pas_attribue", "operateur": "Non attribu√©", "relation": "Reims>Fismes", "region": "Grand Est", "type_marche": "TER", "lot": "√âtoile de Reims"}, {"coords": [[4.0317, 49.2583], [3.6244, 49.5639]], "lib_ligne": "Reims ‚Üí Laon", "statut": "mis_en_concurrence_pas_attribue", "operateur": "Non attribu√©", "relation": "Reims>Laon", "region": "Grand Est", "type_marche": "TER", "lot": "√âtoile de Reims"}, {"coords": [[2.2958, 49.8941], [3.2967, 49.6567]], "lib_ligne": "Amiens ‚Üí Tergnier", "statut": "attribue_SNCF", "operateur": "SNCF", "relation": "Amiens>Tergnier>Laon", "region": "Hauts-de-France", "type_marche": "TER", "lot": "√âtoile d'Amiens"}, {"coords": [[3.2967, 49.6567], [3.6244, 49.5639]], "lib_ligne": "Tergnier ‚Üí Laon", "statut": "attribue_SNCF", "operateur": "SNCF", "relation": "Amiens>Tergnier>Laon", "region": "Hauts-de-France", "type_marche": "TER", "lot": "√âtoile d'Amiens"}, {"coords": [[2.2958, 49.8941], [3.2875, 49.8478]], "lib_ligne": "Amiens ‚Üí Saint-Quentin", "statut": "attribue_SNCF", "operateur": "SNCF", "relation": "Amiens>Saint-Quentin", "region": "Hauts-de-France", "type_marche": "TER", "lot": "√âtoile d'Amiens"}, {"coords": [[2.2958, 49.8941], [2.6519, 50.0031]], "lib_ligne": "Amiens ‚Üí Albert", "statut": "attribue_SNCF", "operateur": "SNCF", "relation": "Amiens>Albert>Lille", "region": "Hauts-de-France", "type_marche": "TER", "lot": "√âtoile d'Amiens"}, {"coords": [[2.6519, 50.0031], [3.0573, 50.6292]], "lib_ligne": "Albert ‚Üí Lille", "statut": "attribue_SNCF", "operateur": "SNCF", "relation": "Amiens>Albert>Lille", "region": "Hauts-de-France", "type_marche": "TER", "lot": "√âtoile d'Amiens"}, {"coords": [[2.2958, 49.8941], [1.8344, 50.1058]], "lib_ligne": "Amiens ‚Üí Abbeville", "statut": "attribue_SNCF", "operateur": "SNCF", "relation": "Amiens>Abbeville", "region": "Hauts-de-France", "type_marche": "TER", "lot": "√âtoile d'Amiens"}, {"coords": [[2.0808, 49.4294], [1.7694, 49.6967]], "lib_ligne": "Beauvais ‚Üí Abancourt", "statut": "attribue_SNCF", "operateur": "SNCF", "relation": "Beauvais>Abancourt>LeTr√©port", "region": "Hauts-de-France", "type_marche": "TER", "lot": "√âtoile d'Amiens"}, {"coords": [[1.7694, 49.6967], [1.3767, 50.0603]], "lib_ligne": "Abancourt ‚Üí LeTr√©port", "statut": "attribue_SNCF", "operateur": "SNCF", "relation": "Beauvais>Abancourt>LeTr√©port", "region": "Hauts-de-France", "type_marche": "TER", "lot": "√âtoile d'Amiens"}, {"coords": [[2.2958, 49.8941], [2.4753, 49.2606]], "lib_ligne": "Amiens ‚Üí Creil", "statut": "attribue_SNCF", "operateur": "SNCF", "relation": "Amiens>Creil", "region": "Hauts-de-France", "type_marche": "TER", "lot": "√âtoile d'Amiens"}, {"coords": [[2.2958, 49.8941], [2.5708, 49.6475]], "lib_ligne": "Amiens ‚Üí Montdidier", "statut": "attribue_SNCF", "operateur": "SNCF", "relation": "Amiens>Montdidier>Compi√®gne", "region": "Hauts-de-France", "type_marche": "TER", "lot": "√âtoile d'Amiens"}, {"coords": [[2.5708, 49.6475], [2.8261, 49.4178]], "lib_ligne": "Montdidier ‚Üí Compi√®gne", "statut": "attribue_SNCF", "operateur": "SNCF", "relation": "Amiens>Montdidier>Compi√®gne", "region": "Hauts-de-France", "type_marche": "TER", "lot": "√âtoile d'Amiens"}, {"coords": [[2.2958, 49.8941], [1.0993, 49.4432]], "lib_ligne": "Amiens ‚Üí Rouen", "statut": "attribue_SNCF", "operateur": "SNCF", "relation": "Amiens>Rouen", "region": "Hauts-de-France", "type_marche": "TER", "lot": "√âtoile d'Amiens"}, {"coords": [[2.3522, 48.8566], [2.4753, 49.2606]], "lib_ligne": "Paris ‚Üí Creil", "statut": "mis_en_concurrence_pas_attribue", "operateur": "Non attribu√©", "relation": "Paris>Creil>Amiens>Calais", "region": "Hauts-de-France", "type_marche": "TER", "lot": "Radiales parisiennes"}, {"coords": [[2.4753, 49.2606], [2.2958, 49.8941]], "lib_ligne": "Creil ‚Üí Amiens", "statut": "mis_en_concurrence_pas_attribue", "operateur": "Non attribu√©", "relation": "Paris>Creil>Amiens>Calais", "region": "Hauts-de-France", "type_marche": "TER", "lot": "Radiales parisiennes"}, {"coords": [[2.2958, 49.8941], [1.8587, 50.9513]], "lib_ligne": "Amiens ‚Üí Calais", "statut": "mis_en_concurrence_pas_attribue", "operateur": "Non attribu√©", "relation": "Paris>Creil>Amiens>Calais", "region": "Hauts-de-France", "type_marche": "TER", "lot": "Radiales parisiennes"}, {"coords": [[2.3522, 48.8566], [2.4753, 49.2606]], "lib_ligne": "Paris ‚Üí Creil", "statut": "mis_en_concurrence_pas_attribue", "operateur": "Non attribu√©", "relation": "Paris>Creil>Compi√®gne>Saint-Quentin>Maubeuge/Cambrai", "region": "Hauts-de-France", "type_marche": "TER", "lot": "Radiales parisiennes"}, {"coords": [[2.4753, 49.2606], [2.8261, 49.4178]], "lib_ligne": "Creil ‚Üí Compi√®gne", "statut": "mis_en_concurrence_pas_attribue", "operateur": "Non attribu√©", "relation": "Paris>Creil>Compi√®gne>Saint-Quentin>Maubeuge/Cambrai", "region": "Hauts-de-France", "type_marche": "TER", "lot": "Radiales parisiennes"}, {"coords": [[2.8261, 49.4178], [3.2875, 49.8478]], "lib_ligne": "Compi√®gne ‚Üí Saint-Quentin", "statut": "mis_en_concurrence_pas_attribue", "operateur": "Non attribu√©", "relation": "Paris>Creil>Compi√®gne>Saint-Quentin>Maubeuge/Cambrai", "region": "Hauts-de-France", "type_marche": "TER", "lot": "Radiales parisiennes"}, {"coords": [[3.2875, 49.8478], [3.9731, 50.2783]], "lib_ligne": "Saint-Quentin ‚Üí Maubeuge/Cambrai", "statut": "mis_en_concurrence_pas_attribue", "operateur": "Non attribu√©", "relation": "Paris>Creil>Compi√®gne>Saint-Quentin>Maubeuge/Cambrai", "region": "Hauts-de-France", "type_marche": "TER", "lot": "Radiales parisiennes"}, {"coords": [[2.3522, 48.8566], [3.6244, 49.5639]], "lib_ligne": "Paris ‚Üí Laon", "statut": "mis_en_concurrence_pas_attribue", "operateur": "Non attribu√©", "relation": "Paris>Laon", "region": "Hauts-de-France", "type_marche": "TER", "lot": "Radiales parisiennes"}, {"coords": [[2.0808, 49.4294], [2.3522, 48.8566]], "lib_ligne": "Beauvais ‚Üí Paris", "statut": "mis_en_concurrence_pas_attribue", "operateur": "Non attribu√©", "relation": "Beauvais>Paris", "region": "Hauts-de-France", "type_marche": "TER", "lot": "Radiales parisiennes"}, {"coords": [[2.2958, 49.8941], [2.4753, 49.2606]], "lib_ligne": "Amiens ‚Üí Creil", "statut": "mis_en_concurrence_pas_attribue", "operateur": "Non attribu√©", "relation": "Amiens>Creil>Roissy", "region": "Hauts-de-France", "type_marche": "TER", "lot": "Radiales parisiennes"}, {"coords": [[2.4753, 49.2606], [2.5479, 49.0097]], "lib_ligne": "Creil ‚Üí Roissy", "statut": "mis_en_concurrence_pas_attribue", "operateur": "Non attribu√©", "relation": "Amiens>Creil>Roissy", "region": "Hauts-de-France", "type_marche": "TER", "lot": "Radiales parisiennes"}, {"coords": [[3.2875, 49.8478], [2.4753, 49.2606]], "lib_ligne": "Saint-Quentin ‚Üí Creil", "statut": "mis_en_concurrence_pas_attribue", "operateur": "Non attribu√©", "relation": "Saint-Quentin>Creil>Roissy", "region": "Hauts-de-France", "type_marche": "TER", "lot": "Radiales parisiennes"}, {"coords": [[2.4753, 49.2606], [2.5479, 49.0097]], "lib_ligne": "Creil ‚Üí Roissy", "statut": "mis_en_concurrence_pas_attribue", "operateur": "Non attribu√©", "relation": "Saint-Quentin>Creil>Roissy", "region": "Hauts-de-France", "type_marche": "TER", "lot": "Radiales parisiennes"}, {"coords": [[2.7775, 50.2919], [2.7775, 50.2919]], "lib_ligne": "Saint-pol-sur-ternoise ‚Üí Arras", "statut": "mis_en_concurrence_pas_attribue", "operateur": "Non attribu√©", "relation": "Saint-pol-sur-ternoise>Arras", "region": "Hauts-de-France", "type_marche": "TER", "lot": "√âtoile de Saint-Pol-sur-Ternoise"}, {"coords": [[2.7775, 50.2919], [2.6408, 50.5292]], "lib_ligne": "Saint-pol-sur-ternoise ‚Üí B√©thune", "statut": "mis_en_concurrence_pas_attribue", "operateur": "Non attribu√©", "relation": "Saint-pol-sur-ternoise>B√©thune", "region": "Hauts-de-France", "type_marche": "TER", "lot": "√âtoile de Saint-Pol-sur-Ternoise"}, {"coords": [[2.7775, 50.2919], [1.6414, 50.5158]], "lib_ligne": "Saint-pol-sur-ternoise ‚Üí Etaples", "statut": "mis_en_concurrence_pas_attribue", "operateur": "Non attribu√©", "relation": "Saint-pol-sur-ternoise>Etaples", "region": "Hauts-de-France", "type_marche": "TER", "lot": "√âtoile de Saint-Pol-sur-Ternoise"}, {"coords": [[-1.5536, 47.2184], [-1.4997, 47.4378]], "lib_ligne": "Nantes ‚Üí Nort-sur-Erdre", "statut": "attribue_SNCF", "operateur": "SNCF", "relation": "Nantes>Nort-sur-Erdre", "region": "Pays de la Loire", "type_marche": "TER", "lot": "Tram-train"}, {"coords": [[-1.5536, 47.2184], [-1.3758, 47.7189]], "lib_ligne": "Nantes ‚Üí Chateaubriand", "statut": "attribue_SNCF", "operateur": "SNCF", "relation": "Nantes>Chateaubriand", "region": "Pays de la Loire", "type_marche": "TER", "lot": "Tram-train"}, {"coords": [[-1.5536, 47.2184], [-1.2817, 47.0867]], "lib_ligne": "Nantes ‚Üí Clisson", "statut": "attribue_SNCF", "operateur": "SNCF", "relation": "Nantes>Clisson", "region": "Pays de la Loire", "type_marche": "TER", "lot": "Tram-train"}, {"coords": [[-1.5536, 47.2184], [-2.1028, 47.1158]], "lib_ligne": "Nantes ‚Üí Pornic", "statut": "attribue_SNCF", "operateur": "SNCF", "relation": "Nantes>Pornic", "region": "Pays de la Loire", "type_marche": "TER", "lot": "Sud Loire"}, {"coords": [[-1.5536, 47.2184], [-1.9394, 46.6958]], "lib_ligne": "Nantes ‚Üí Saint-Gilles-Croix-de-vie", "statut": "attribue_SNCF", "operateur": "SNCF", "relation": "Nantes>Saint-Gilles-Croix-de-vie", "region": "Pays de la Loire", "type_marche": "TER", "lot": "Sud Loire"}, {"coords": [[-1.5536, 47.2184], [-1.4269, 46.67]], "lib_ligne": "Nantes ‚Üí LaRoche-sur-yon", "statut": "attribue_SNCF", "operateur": "SNCF", "relation": "Nantes>LaRoche-sur-yon>LesSablesd'olonne", "region": "Pays de la Loire", "type_marche": "TER", "lot": "Sud Loire"}, {"coords": [[-1.4269, 46.67], [-1.7842, 46.4969]], "lib_ligne": "LaRoche-sur-yon ‚Üí LesSablesd'olonne", "statut": "attribue_SNCF", "operateur": "SNCF", "relation": "Nantes>LaRoche-sur-yon>LesSablesd'olonne", "region": "Pays de la Loire", "type_marche": "TER", "lot": "Sud Loire"}, {"coords": [[-1.5536, 47.2184], [-1.1511, 46.1603]], "lib_ligne": "Nantes ‚Üí LaRochelle", "statut": "attribue_SNCF", "operateur": "SNCF", "relation": "Nantes>LaRochelle", "region": "Pays de la Loire", "type_marche": "TER", "lot": "Sud Loire"}, {"coords": [[-1.5536, 47.2184], [-0.8792, 47.0589]], "lib_ligne": "Nantes ‚Üí Cholet", "statut": "attribue_SNCF", "operateur": "SNCF", "relation": "Nantes>Cholet", "region": "Pays de la Loire", "type_marche": "TER", "lot": "Sud Loire"}, {"coords": [[-0.5632, 47.4784], [-0.8792, 47.0589]], "lib_ligne": "Angers ‚Üí Cholet", "statut": "attribue_SNCF", "operateur": "SNCF", "relation": "Angers>Cholet", "region": "Pays de la Loire", "type_marche": "TER", "lot": "Sud Loire"}, {"coords": [[5.3698, 43.2965], [5.928, 43.1242]], "lib_ligne": "Marseille ‚Üí Toulon", "statut": "attribue_concurrent", "operateur": "Transdev", "relation": "Marseille>Toulon>Nice", "region": "Provence-Alpes-C√¥te d'Azur", "type_marche": "TER", "lot": "Interm√©tropoles"}, {"coords": [[5.928, 43.1242], [7.262, 43.7102]], "lib_ligne": "Toulon ‚Üí Nice", "statut": "attribue_concurrent", "operateur": "Transdev", "relation": "Marseille>Toulon>Nice", "region": "Provence-Alpes-C√¥te d'Azur", "type_marche": "TER", "lot": "Interm√©tropoles"}, {"coords": [[6.4822, 43.4656], [7.262, 43.7102]], "lib_ligne": "LesArcsDraguignan ‚Üí Nice", "statut": "attribue_SNCF", "operateur": "SNCF", "relation": "LesArcsDraguignan>Nice>Vintimille", "region": "Provence-Alpes-C√¥te d'Azur", "type_marche": "TER", "lot": "Azur"}, {"coords": [[7.262, 43.7102], [7.5083, 43.7897]], "lib_ligne": "Nice ‚Üí Vintimille", "statut": "attribue_SNCF", "operateur": "SNCF", "relation": "LesArcsDraguignan>Nice>Vintimille", "region": "Provence-Alpes-C√¥te d'Azur", "type_marche": "TER", "lot": "Azur"}, {"coords": [[7.0174, 43.5528], [6.9214, 43.6586]], "lib_ligne": "Cannes ‚Üí Grasse", "statut": "attribue_SNCF", "operateur": "SNCF", "relation": "Cannes>Grasse", "region": "Provence-Alpes-C√¥te d'Azur", "type_marche": "TER", "lot": "Azur"}, {"coords": [[7.262, 43.7102], [7.5139, 43.9331]], "lib_ligne": "Nice ‚Üí Breil-sur-Roya", "statut": "attribue_SNCF", "operateur": "SNCF", "relation": "Nice>Breil-sur-Roya>Tende", "region": "Provence-Alpes-C√¥te d'Azur", "type_marche": "TER", "lot": "Azur"}, {"coords": [[7.5139, 43.9331], [7.5942, 44.0889]], "lib_ligne": "Breil-sur-Roya ‚Üí Tende", "statut": "attribue_SNCF", "operateur": "SNCF", "relation": "Nice>Breil-sur-Roya>Tende", "region": "Provence-Alpes-C√¥te d'Azur", "type_marche": "TER", "lot": "Azur"}, {"coords": [[5.3698, 43.2965], [5.5708, 43.2917]], "lib_ligne": "Marseille ‚Üí Aubagne", "statut": "attribue_SNCF", "operateur": "SNCF", "relation": "Marseille>Aubagne>Toulon>Hy√®res", "region": "Provence-Alpes-C√¥te d'Azur", "type_marche": "TER", "lot": "Lot 3"}, {"coords": [[5.5708, 43.2917], [5.928, 43.1242]], "lib_ligne": "Aubagne ‚Üí Toulon", "statut": "attribue_SNCF", "operateur": "SNCF", "relation": "Marseille>Aubagne>Toulon>Hy√®res", "region": "Provence-Alpes-C√¥te d'Azur", "type_marche": "TER", "lot": "Lot 3"}, {"coords": [[5.928, 43.1242], [6.1286, 43.1203]], "lib_ligne": "Toulon ‚Üí Hy√®res", "statut": "attribue_SNCF", "operateur": "SNCF", "relation": "Marseille>Aubagne>Toulon>Hy√®res", "region": "Provence-Alpes-C√¥te d'Azur", "type_marche": "TER", "lot": "Lot 3"}, {"coords": [[5.3698, 43.2965], [5.928, 43.1242]], "lib_ligne": "Marseille ‚Üí Toulon", "statut": "attribue_SNCF", "operateur": "SNCF", "relation": "Marseille>Toulon>LesArcsDraguignan", "region": "Provence-Alpes-C√¥te d'Azur", "type_marche": "TER", "lot": "Lot 3"}, {"coords": [[5.928, 43.1242], [6.4822, 43.4656]], "lib_ligne": "Toulon ‚Üí LesArcsDraguignan", "statut": "attribue_SNCF", "operateur": "SNCF", "relation": "Marseille>Toulon>LesArcsDraguignan", "region": "Provence-Alpes-C√¥te d'Azur", "type_marche": "TER", "lot": "Lot 3"}, {"coords": [[5.3698, 43.2965], [5.4474, 43.5297]], "lib_ligne": "Marseille ‚Üí Aix-en-provence", "statut": "attribue_SNCF", "operateur": "SNCF", "relation": "Marseille>Aix-en-provence>Pertuis", "region": "Provence-Alpes-C√¥te d'Azur", "type_marche": "TER", "lot": "Lot 3"}, {"coords": [[5.4474, 43.5297], [5.5028, 43.6936]], "lib_ligne": "Aix-en-provence ‚Üí Pertuis", "statut": "attribue_SNCF", "operateur": "SNCF", "relation": "Marseille>Aix-en-provence>Pertuis", "region": "Provence-Alpes-C√¥te d'Azur", "type_marche": "TER", "lot": "Lot 3"}, {"coords": [[5.3698, 43.2965], [6.0789, 44.5597]], "lib_ligne": "Marseille ‚Üí Gap", "statut": "attribue_SNCF", "operateur": "SNCF", "relation": "Marseille>Gap>Brian√ßon", "region": "Provence-Alpes-C√¥te d'Azur", "type_marche": "TER", "lot": "Lot 3"}, {"coords": [[6.0789, 44.5597], [6.6414, 44.895]], "lib_ligne": "Gap ‚Üí Brian√ßon", "statut": "attribue_SNCF", "operateur": "SNCF", "relation": "Marseille>Gap>Brian√ßon", "region": "Provence-Alpes-C√¥te d'Azur", "type_marche": "TER", "lot": "Lot 3"}, {"coords": [[6.6414, 44.895], [6.0789, 44.5597]], "lib_ligne": "Brian√ßon ‚Üí Gap", "statut": "attribue_SNCF", "operateur": "SNCF", "relation": "Brian√ßon>Gap>Valence>Romans", "region": "Provence-Alpes-C√¥te d'Azur", "type_marche": "TER", "lot": "Lot 3"}, {"coords": [[6.0789, 44.5597], [4.892, 44.9333]], "lib_ligne": "Gap ‚Üí Valence", "statut": "attribue_SNCF", "operateur": "SNCF", "relation": "Brian√ßon>Gap>Valence>Romans", "region": "Provence-Alpes-C√¥te d'Azur", "type_marche": "TER", "lot": "Lot 3"}, {"coords": [[4.892, 44.9333], [5.0461, 45.0456]], "lib_ligne": "Valence ‚Üí Romans", "statut": "attribue_SNCF", "operateur": "SNCF", "relation": "Brian√ßon>Gap>Valence>Romans", "region": "Provence-Alpes-C√¥te d'Azur", "type_marche": "TER", "lot": "Lot 3"}, {"coords": [[5.3698, 43.2965], [5.0042, 43.585]], "lib_ligne": "Marseille ‚Üí Miramas", "statut": "mis_en_concurrence_pas_attribue", "operateur": "Non attribu√©", "relation": "Marseille>Miramas", "region": "Provence-Alpes-C√¥te d'Azur", "type_marche": "TER", "lot": "Lot 4"}, {"coords": [[5.3698, 43.2965], [4.8056, 43.9483]], "lib_ligne": "Marseille ‚Üí Avignon", "statut": "mis_en_concurrence_pas_attribue", "operateur": "Non attribu√©", "relation": "Marseille>Avignon", "region": "Provence-Alpes-C√¥te d'Azur", "type_marche": "TER", "lot": "Lot 4"}, {"coords": [[5.3698, 43.2965], [4.8056, 43.9483]], "lib_ligne": "Marseille ‚Üí Avignon", "statut": "mis_en_concurrence_pas_attribue", "operateur": "Non attribu√©", "relation": "Marseille>Avignon>Valence>Lyon", "region": "Provence-Alpes-C√¥te d'Azur", "type_marche": "TER", "lot": "Lot 4"}, {"coords": [[4.8056, 43.9483], [4.892, 44.9333]], "lib_ligne": "Avignon ‚Üí Valence", "statut": "mis_en_concurrence_pas_attribue", "operateur": "Non attribu√©", "relation": "Marseille>Avignon>Valence>Lyon", "region": "Provence-Alpes-C√¥te d'Azur", "type_marche": "TER", "lot": "Lot 4"}, {"coords": [[4.892, 44.9333], [4.8357, 45.764]], "lib_ligne": "Valence ‚Üí Lyon", "statut": "mis_en_concurrence_pas_attribue", "operateur": "Non attribu√©", "relation": "Marseille>Avignon>Valence>Lyon", "region": "Provence-Alpes-C√¥te d'Azur", "type_marche": "TER", "lot": "Lot 4"}, {"coords": [[5.3698, 43.2965], [4.3601, 43.8367]], "lib_ligne": "Marseille ‚Üí N√Æmes", "statut": "mis_en_concurrence_pas_attribue", "operateur": "Non attribu√©", "relation": "Marseille>N√Æmes>Montpellier", "region": "Provence-Alpes-C√¥te d'Azur", "type_marche": "TER", "lot": "Lot 4"}, {"coords": [[4.3601, 43.8367], [3.8767, 43.6108]], "lib_ligne": "N√Æmes ‚Üí Montpellier", "statut": "mis_en_concurrence_pas_attribue", "operateur": "Non attribu√©", "relation": "Marseille>N√Æmes>Montpellier", "region": "Provence-Alpes-C√¥te d'Azur", "type_marche": "TER", "lot": "Lot 4"}, {"coords": [[4.8056, 43.9483], [5.0489, 44.0553]], "lib_ligne": "Avignon ‚Üí Carpentras", "statut": "mis_en_concurrence_pas_attribue", "operateur": "Non attribu√©", "relation": "Avignon>Carpentras", "region": "Provence-Alpes-C√¥te d'Azur", "type_marche": "TER", "lot": "Lot 4"}, {"coords": [[-0.3707, 49.1829], [-1.4442, 49.0475]], "lib_ligne": "Caen ‚Üí Coutances", "statut": "attribue_concurrent", "operateur": "RATP", "relation": "Caen>Coutances", "region": "Normandie", "type_marche": "TER", "lot": "√âtoile de Caen"}, {"coords": [[-0.3707, 49.1829], [-1.0914, 49.1158]], "lib_ligne": "Caen ‚Üí Saint-L√¥", "statut": "attribue_concurrent", "operateur": "RATP", "relation": "Caen>Saint-L√¥", "region": "Normandie", "type_marche": "TER", "lot": "√âtoile de Caen"}, {"coords": [[-0.3707, 49.1829], [1.1508, 49.0247]], "lib_ligne": "Caen ‚Üí Evreux", "statut": "attribue_concurrent", "operateur": "RATP", "relation": "Caen>Evreux", "region": "Normandie", "type_marche": "TER", "lot": "√âtoile de Caen"}, {"coords": [[-0.3707, 49.1829], [-1.6222, 49.6337]], "lib_ligne": "Caen ‚Üí Cherbourg", "statut": "attribue_concurrent", "operateur": "RATP", "relation": "Caen>Cherbourg", "region": "Normandie", "type_marche": "TER", "lot": "√âtoile de Caen"}, {"coords": [[-0.3707, 49.1829], [1.0993, 49.4432]], "lib_ligne": "Caen ‚Üí Rouen", "statut": "attribue_concurrent", "operateur": "RATP", "relation": "Caen>Rouen", "region": "Normandie", "type_marche": "TER", "lot": "√âtoile de Caen"}, {"coords": [[-0.3707, 49.1829], [0.2258, 49.1458]], "lib_ligne": "Caen ‚Üí Lisieux", "statut": "attribue_concurrent", "operateur": "RATP", "relation": "Caen>Lisieux", "region": "Normandie", "type_marche": "TER", "lot": "√âtoile de Caen"}, {"coords": [[-0.3707, 49.1829], [-1.5972, 48.8378]], "lib_ligne": "Caen ‚Üí Granville", "statut": "attribue_concurrent", "operateur": "RATP", "relation": "Caen>Granville", "region": "Normandie", "type_marche": "TER", "lot": "√âtoile de Caen"}, {"coords": [[-0.3707, 49.1829], [-1.6778, 48.1173]], "lib_ligne": "Caen ‚Üí Rennes", "statut": "attribue_concurrent", "operateur": "RATP", "relation": "Caen>Rennes", "region": "Normandie", "type_marche": "TER", "lot": "√âtoile de Caen"}, {"coords": [[0.2258, 49.1458], [0.0808, 49.3667]], "lib_ligne": "Lisieux ‚Üí Trouville-Deauville", "statut": "attribue_concurrent", "operateur": "RATP", "relation": "Lisieux>Trouville-Deauville", "region": "Normandie", "type_marche": "TER", "lot": "√âtoile de Caen"}, {"coords": [[0.0808, 49.3667], [-0.1031, 49.2867]], "lib_ligne": "Trouville-Deauville ‚Üí Dives-Cabourg", "statut": "attribue_concurrent", "operateur": "RATP", "relation": "Trouville-Deauville>Dives-Cabourg", "region": "Normandie", "type_marche": "TER", "lot": "√âtoile de Caen"}, {"coords": [[-1.1511, 46.1603], [-0.9608, 45.9364]], "lib_ligne": "LaRochelle ‚Üí Rochefort", "statut": "mis_en_concurrence_pas_attribue", "operateur": "Non attribu√©", "relation": "LaRochelle>Rochefort>Saintes>Bordeaux", "region": "Nouvelle-Aquitaine", "type_marche": "TER", "lot": "Poitou-charentes"}, {"coords": [[-0.9608, 45.9364], [-0.6333, 45.7467]], "lib_ligne": "Rochefort ‚Üí Saintes", "statut": "mis_en_concurrence_pas_attribue", "operateur": "Non attribu√©", "relation": "LaRochelle>Rochefort>Saintes>Bordeaux", "region": "Nouvelle-Aquitaine", "type_marche": "TER", "lot": "Poitou-charentes"}, {"coords": [[-0.6333, 45.7467], [-0.5792, 44.8378]], "lib_ligne": "Saintes ‚Üí Bordeaux", "statut": "mis_en_concurrence_pas_attribue", "operateur": "Non attribu√©", "relation": "LaRochelle>Rochefort>Saintes>Bordeaux", "region": "Nouvelle-Aquitaine", "type_marche": "TER", "lot": "Poitou-charentes"}, {"coords": [[0.16, 45.65], [-0.6333, 45.7467]], "lib_ligne": "Angoul√™me ‚Üí Saintes", "statut": "mis_en_concurrence_pas_attribue", "operateur": "Non attribu√©", "relation": "Angoul√™me>Saintes>Royan", "region": "Nouvelle-Aquitaine", "type_marche": "TER", "lot": "Poitou-charentes"}, {"coords": [[-0.6333, 45.7467], [-1.0281, 45.625]], "lib_ligne": "Saintes ‚Üí Royan", "statut": "mis_en_concurrence_pas_attribue", "operateur": "Non attribu√©", "relation": "Angoul√™me>Saintes>Royan", "region": "Nouvelle-Aquitaine", "type_marche": "TER", "lot": "Poitou-charentes"}, {"coords": [[-0.4594, 46.3236], [-0.6333, 45.7467]], "lib_ligne": "Niort ‚Üí Saintes", "statut": "mis_en_concurrence_pas_attribue", "operateur": "Non attribu√©", "relation": "Niort>Saintes>Royan", "region": "Nouvelle-Aquitaine", "type_marche": "TER", "lot": "Poitou-charentes"}, {"coords": [[-0.6333, 45.7467], [-1.0281, 45.625]], "lib_ligne": "Saintes ‚Üí Royan", "statut": "mis_en_concurrence_pas_attribue", "operateur": "Non attribu√©", "relation": "Niort>Saintes>Royan", "region": "Nouvelle-Aquitaine", "type_marche": "TER", "lot": "Poitou-charentes"}, {"coords": [[0.3404, 46.5802], [-0.4594, 46.3236]], "lib_ligne": "Poitiers ‚Üí Niort", "statut": "mis_en_concurrence_pas_attribue", "operateur": "Non attribu√©", "relation": "Poitiers>Niort>LaRochelle", "region": "Nouvelle-Aquitaine", "type_marche": "TER", "lot": "Poitou-charentes"}, {"coords": [[-0.4594, 46.3236], [-1.1511, 46.1603]], "lib_ligne": "Niort ‚Üí LaRochelle", "statut": "mis_en_concurrence_pas_attribue", "operateur": "Non attribu√©", "relation": "Poitiers>Niort>LaRochelle", "region": "Nouvelle-Aquitaine", "type_marche": "TER", "lot": "Poitou-charentes"}, {"coords": [[0.6848, 47.3941], [0.5461, 46.8178]], "lib_ligne": "Tours ‚Üí Ch√¢tellerault", "statut": "mis_en_concurrence_pas_attribue", "operateur": "Non attribu√©", "relation": "Tours>Ch√¢tellerault>Poitiers", "region": "Nouvelle-Aquitaine", "type_marche": "TER", "lot": "Poitou-charentes"}, {"coords": [[0.5461, 46.8178], [0.3404, 46.5802]], "lib_ligne": "Ch√¢tellerault ‚Üí Poitiers", "statut": "mis_en_concurrence_pas_attribue", "operateur": "Non attribu√©", "relation": "Tours>Ch√¢tellerault>Poitiers", "region": "Nouvelle-Aquitaine", "type_marche": "TER", "lot": "Poitou-charentes"}, {"coords": [[0.3404, 46.5802], [0.16, 45.65]], "lib_ligne": "Poitiers ‚Üí Angoul√™me", "statut": "mis_en_concurrence_pas_attribue", "operateur": "Non attribu√©", "relation": "Poitiers>Angoul√™me", "region": "Nouvelle-Aquitaine", "type_marche": "TER", "lot": "Poitou-charentes"}, {"coords": [[0.5461, 46.8178], [0.3404, 46.5802]], "lib_ligne": "Ch√¢tellerault ‚Üí Poitiers", "statut": "mis_en_concurrence_pas_attribue", "operateur": "Non attribu√©", "relation": "Ch√¢tellerault>Poitiers>Angoul√™me", "region": "Nouvelle-Aquitaine", "type_marche": "TER", "lot": "Poitou-charentes"}, {"coords": [[0.3404, 46.5802], [0.16, 45.65]], "lib_ligne": "Poitiers ‚Üí Angoul√™me", "statut": "mis_en_concurrence_pas_attribue", "operateur": "Non attribu√©", "relation": "Ch√¢tellerault>Poitiers>Angoul√™me", "region": "Nouvelle-Aquitaine", "type_marche": "TER", "lot": "Poitou-charentes"}, {"coords": [[0.16, 45.65], [-0.5792, 44.8378]], "lib_ligne": "Angoul√™me ‚Üí Bordeaux", "statut": "mis_en_concurrence_pas_attribue", "operateur": "Non attribu√©", "relation": "Angoul√™me>Bordeaux", "region": "Nouvelle-Aquitaine", "type_marche": "TER", "lot": "Poitou-charentes"}, {"coords": [[-1.5536, 47.2184], [-0.5792, 44.8378]], "lib_ligne": "Nantes ‚Üí Bordeaux", "statut": "attribue_SNCF", "operateur": "SNCF", "relation": "Nantes>Bordeaux", "region": "France enti√®re (√âtat)", "type_marche": "TET", "lot": "Bordeaux, Nantes, Lyon"}, {"coords": [[-1.5536, 47.2184], [4.8357, 45.764]], "lib_ligne": "Nantes ‚Üí Lyon", "statut": "attribue_SNCF", "operateur": "SNCF", "relation": "Nantes>Lyon", "region": "France enti√®re (√âtat)", "type_marche": "TET", "lot": "Bordeaux, Nantes, Lyon"}, {"coords": [[2.3522, 48.8566], [3.087, 45.7772]], "lib_ligne": "Paris ‚Üí Clermont", "statut": "mis_en_concurrence_pas_attribue", "operateur": "Non attribu√©", "relation": "Paris>Clermont", "region": "France enti√®re (√âtat)", "type_marche": "TET", "lot": "ParisClermont"}, {"coords": [[2.3522, 48.8566], [1.2611, 45.8336]], "lib_ligne": "Paris ‚Üí Limoges", "statut": "mis_en_concurrence_pas_attribue", "operateur": "Non attribu√©", "relation": "Paris>Limoges>Toulouse", "region": "France enti√®re (√âtat)", "type_marche": "TET", "lot": "ParisLimogesToulouse"}, {"coords": [[1.2611, 45.8336], [1.4442, 43.6047]], "lib_ligne": "Limoges ‚Üí Toulouse", "statut": "mis_en_concurrence_pas_attribue", "operateur": "Non attribu√©", "relation": "Paris>Limoges>Toulouse", "region": "France enti√®re (√âtat)", "type_marche": "TET", "lot": "ParisLimogesToulouse"}];
        
        var lignesParStatut = {
            'attribue_SNCF': [],
            'mis_en_concurrence_pas_attribue': [],
            'attribue_concurrent': []
        };
        
        lignes.forEach(function(ligne) {
            lignesParStatut[ligne.statut].push(ligne);
        });
        
        ['attribue_SNCF', 'mis_en_concurrence_pas_attribue', 'attribue_concurrent'].forEach(function(statut) {
            lignesParStatut[statut].forEach(function(ligne) {
                var coords = ligne.coords;
                var latLngs = coords.map(c => [c[1], c[0]]);
                
                var style = styles[ligne.statut];
                var polyline = L.polyline(latLngs, style).addTo(map);
                
                var popupContent = '<div><h3>' + ligne.lib_ligne + '</h3>';
                
                if (ligne.region) {
                    popupContent += '<p><span class="popup-label"><strong>R√©gion:</strong></span> ' + ligne.region + '</p>';
                }
                
                if (ligne.relation) {
                    popupContent += '<p><span class="popup-label"><strong>Relation:</strong></span> ' + ligne.relation + '</p>';
                }
                
                if (ligne.lot) {
                    popupContent += '<p><span class="popup-label"><strong>Lot:</strong></span> ' + ligne.lot + '</p>';
                }
                
                var statutLabel = ligne.statut === 'attribue_SNCF' ? 'Attribu√© √† SNCF' :
                                 ligne.statut === 'attribue_concurrent' ? 'Attribu√© √† un concurrent' :
                                 'Mis en concurrence (non attribu√©)';
                popupContent += '<p><span class="popup-label"><strong>Statut:</strong></span> ' + statutLabel + '</p>';
                
                if (ligne.operateur) {
                    popupContent += '<p><span class="popup-label"><strong>Op√©rateur:</strong></span> ' + ligne.operateur + '</p>';
                }
                
                popupContent += '</div>';
                polyline.bindPopup(popupContent);
                
                polyline.on('mouseover', function(e) {
                    this.setStyle({
                        weight: style.weight + 3,
                        opacity: 1
                    });
                });
                
                polyline.on('mouseout', function(e) {
                    this.setStyle(style);
                });
            });
        });
        
        var legend = L.control({position: 'bottomright'});
        legend.onAdd = function(map) {
            var div = L.DomUtil.create('div', 'legend');
            div.innerHTML = '<h4>Ouverture √† la concurrence TER</h4>';
            
            [
                ['attribue_SNCF', 'G√©r√© par SNCF', lignesParStatut['attribue_SNCF'].length],
                ['attribue_concurrent', 'G√©r√© par un concurrent', lignesParStatut['attribue_concurrent'].length],
                ['mis_en_concurrence_pas_attribue', 'Mis en concurrence (non attribu√©)', lignesParStatut['mis_en_concurrence_pas_attribue'].length]
            ].forEach(function(item) {
                div.innerHTML += '<div class="legend-item">' +
                    '<span class="legend-color" style="background-color: ' + styles[item[0]].color + ';"></span>' +
                    '<span>' + item[1] + ' (' + item[2] + ')</span>' +
                    '</div>';
            });
            
            div.innerHTML += '<div class="legend-source">Source: Contexte (17/11/2025)<br>Donn√©es: 131 liaisons</div>';
            return div;
        };
        legend.addTo(map);
        
        var info = L.control({position: 'topleft'});
        info.onAdd = function(map) {
            var div = L.DomUtil.create('div', 'info');
            div.innerHTML = '<h4>üöÑ Lignes TER</h4>' +
                '<p>Ouverture √† la concurrence</p>' +
                '<p style="font-size: 11px; margin-top: 6px; color: #888;">Survolez ou cliquez sur une ligne</p>';
            return div;
        };
        info.addTo(map);
    </script>
</body>
</html>
